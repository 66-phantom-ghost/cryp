<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto-Gate</title>
<style>
  :root {
    --bg: #000000;
    --panel: #0a0a0a;
    --card: #111111;
    --accent-red: #FF073A;
    --accent-green: #00FF41;
    --text: #e5e7eb;
    --muted: #888;
    --border: rgba(255,255,255,0.08);
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at center, #1a0000 0%, #000000 80%);
    font-family: 'Inter', sans-serif;
    color: var(--text);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .wrapper {
    width: 100%;
    max-width: 500px;
    padding: 20px;
  }

  .card {
    background: var(--card);
    border-radius: 16px;
    padding: 28px;
    box-shadow: 0 0 30px var(--accent-red), inset 0 0 0 1px var(--border);
  }

  h1 {
    text-align: center;
    color: var(--accent-red);
    margin-bottom: 5px;
  }

  p {
    text-align: center;
    color: var(--muted);
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 0.9rem;
  }

  label {
    display: block;
    margin-bottom: 6px;
    font-size: 0.8rem;
    color: var(--muted);
  }

  input, textarea {
    width: 100%;
    background: var(--panel);
    border: none;
    border-radius: 10px;
    padding: 12px;
    color: var(--text);
    font-size: 0.95rem;
    margin-bottom: 16px;
    outline: none;
    box-shadow: inset 0 0 0 1px var(--border);
  }

  input:focus, textarea:focus {
    box-shadow: 0 0 0 2px var(--accent-red), inset 0 0 0 1px var(--accent-red);
  }

  .actions {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  button {
    flex: 1;
    margin: 0 5px;
    padding: 12px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    font-weight: 700;
    color: white;
    font-size: 0.9rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .encrypt {
    background: linear-gradient(135deg, var(--accent-red), #C0042D);
    box-shadow: 0 5px 15px var(--accent-red);
  }

  .decrypt {
    background: linear-gradient(135deg, var(--accent-green), #00C834);
    color: #000;
    box-shadow: 0 5px 15px var(--accent-green);
  }

  .output {
    background: var(--panel);
    border-radius: 12px;
    padding: 14px;
    font-family: monospace;
    font-size: 0.85rem;
    word-break: break-all;
    border: 1px solid var(--border);
    color: #00FFFF;
    margin-bottom: 10px;
  }

  .meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    color: var(--muted);
  }

  .copy {
    background: transparent;
    border: 1px solid var(--accent-green);
    color: var(--accent-green);
    padding: 6px 10px;
    border-radius: 8px;
    cursor: pointer;
  }

  .copy:hover {
    background: rgba(0,255,65,0.1);
  }
</style>
</head>
<body>
<div class="wrapper">
  <div class="card">
    <h1>Crypto-Gate</h1>
    <p>Private · Minimal · Secure</p>

    <label for="password">Passwort</label>
    <input id="password" type="password" placeholder="••••••••">

    <label for="text">Text</label>
    <textarea id="text" placeholder="Klartext oder verschlüsselter Inhalt"></textarea>

    <div class="actions">
      <button class="encrypt" onclick="run('encrypt')">Verschlüsseln</button>
      <button class="decrypt" onclick="run('decrypt')">Entschlüsseln</button>
    </div>

    <div class="output" id="preview">Bereit.</div>
    <div class="meta">
      <span id="info"></span>
      <button class="copy" onclick="copyText()" id="copyBtn" style="display:none">Kopieren</button>
    </div>
  </div>
</div>

<script>
const password = document.getElementById("password");
const text = document.getElementById("text");
const preview = document.getElementById("preview");
const info = document.getElementById("info");
const copyBtn = document.getElementById("copyBtn");

const API_BASE = "https://unwintry-strapping-winford.ngrok-free.dev"; // dein Server

let lastResult = "";

async function run(mode){
  const pw = password.value.trim();
  const tx = text.value.trim();

  if(!pw || !tx){
    preview.textContent = "Passwort und Text eingeben.";
    info.textContent = "";
    copyBtn.style.display = "none";
    return;
  }

  preview.textContent = "Verarbeite…";
  info.textContent = "";
  copyBtn.style.display = "none";

  try {
    const resp = await fetch(`${API_BASE}/api/${mode}`, {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify({ password: pw, data: tx })
    });

    if(!resp.ok){
      const err = await resp.json().catch(()=>({error:resp.statusText}));
      preview.textContent = "Fehler: " + (err.error || resp.statusText);
      return;
    }

    const data = await resp.json();
    lastResult = data.result || "";
    preview.textContent = lastResult;
    info.textContent = lastResult.length + " Zeichen";
    copyBtn.style.display = "inline-block";

  } catch(e){
    preview.textContent = "Fehler: Server nicht erreichbar.";
    info.textContent = "";
  }
}

function copyText(){
  if(!lastResult) return;
  navigator.clipboard.writeText(lastResult);
  info.textContent = "Kopiert!";
}
</script>
</body>
</html>
